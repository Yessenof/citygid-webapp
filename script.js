const cities = [
  "ÐÐ»Ð¼Ð°Ñ‚Ñ‹", "ÐÑÑ‚Ð°Ð½Ð°", "Ð¨Ñ‹Ð¼ÐºÐµÐ½Ñ‚", "ÐÐºÑ‚Ð¾Ð±Ðµ", "ÐšÐ°Ñ€Ð°Ð³Ð°Ð½Ð´Ð°", "Ð¢Ð°Ñ€Ð°Ð·", "Ð£ÑÑ‚ÑŒ-ÐšÐ°Ð¼ÐµÐ½Ð¾Ð³Ð¾Ñ€ÑÐº",
  "ÐŸÐ°Ð²Ð»Ð¾Ð´Ð°Ñ€", "ÐšÐ¾ÑÑ‚Ð°Ð½Ð°Ð¹", "ÐšÐ¾ÐºÑˆÐµÑ‚Ð°Ñƒ", "ÐŸÐµÑ‚Ñ€Ð¾Ð¿Ð°Ð²Ð»Ð¾Ð²ÑÐº", "Ð£Ñ€Ð°Ð»ÑŒÑÐº", "Ð¢Ð°Ð»Ð´Ñ‹ÐºÐ¾Ñ€Ð³Ð°Ð½", "Ð¡ÐµÐ¼ÐµÐ¹",
  "Ð”ÑƒÐ±Ð°Ð¹", "ÐÐ±Ñƒ-Ð”Ð°Ð±Ð¸", "Ð¨Ð°Ñ€Ð´Ð¶Ð°", "Ð Ð°Ñ-ÑÐ»ÑŒ-Ð¥Ð°Ð¹Ð¼Ð°", "Ð¤ÑƒÐ´Ð¶ÐµÐ¹Ñ€Ð°",
  "Ð‘Ð¸ÑˆÐºÐµÐº", "ÐžÑˆ", "Ð¢Ð°ÑˆÐºÐµÐ½Ñ‚", "Ð¡Ð°Ð¼Ð°Ñ€ÐºÐ°Ð½Ð´", "ÐÑƒÐºÑƒÑ", "Ð¥Ð¸Ð²Ð°", "Ð”ÑƒÑˆÐ°Ð½Ð±Ðµ", "Ð¥ÑƒÐ´Ð¶Ð°Ð½Ð´",
  "ÐœÐ¾ÑÐºÐ²Ð°", "Ð¡Ð°Ð½ÐºÑ‚-ÐŸÐµÑ‚ÐµÑ€Ð±ÑƒÑ€Ð³", "Ð¡Ð¾Ñ‡Ð¸", "ÐšÑ€Ð°ÑÐ½Ð¾Ð´Ð°Ñ€", "Ð•ÐºÐ°Ñ‚ÐµÑ€Ð¸Ð½Ð±ÑƒÑ€Ð³", "ÐÐ¾Ð²Ð¾ÑÐ¸Ð±Ð¸Ñ€ÑÐº",
  "ÐžÐ¼ÑÐº", "Ð¢Ð¾Ð¼ÑÐº", "Ð§ÐµÐ»ÑÐ±Ð¸Ð½ÑÐº", "ÐšÐ°Ð·Ð°Ð½ÑŒ", "Ð£Ñ„Ð°", "ÐŸÐµÑ€Ð¼ÑŒ", "Ð’Ð¾Ð»Ð³Ð¾Ð³Ñ€Ð°Ð´", "Ð Ð¾ÑÑ‚Ð¾Ð²-Ð½Ð°-Ð”Ð¾Ð½Ñƒ",
  "ÐœÐ°Ñ…Ð°Ñ‡ÐºÐ°Ð»Ð°", "ÐÑÑ‚Ñ€Ð°Ñ…Ð°Ð½ÑŒ", "Ð˜Ñ€ÐºÑƒÑ‚ÑÐº", "Ð¥Ð°Ð±Ð°Ñ€Ð¾Ð²ÑÐº", "Ð’Ð»Ð°Ð´Ð¸Ð²Ð¾ÑÑ‚Ð¾Ðº", "ÐšÐ°Ð»Ð¸Ð½Ð¸Ð½Ð³Ñ€Ð°Ð´",
  "ÐÐ½Ñ‚Ð°Ð»ÑŒÑ", "Ð¡Ñ‚Ð°Ð¼Ð±ÑƒÐ»", "Ð˜Ð·Ð¼Ð¸Ñ€", "Ð‘Ð¾Ð´Ñ€ÑƒÐ¼", "ÐœÐ°Ñ€Ð¼Ð°Ñ€Ð¸Ñ", "Ð’ÐµÐ½Ð°", "ÐŸÑ€Ð°Ð³Ð°", "Ð‘ÑƒÐ´Ð°Ð¿ÐµÑˆÑ‚",
  "Ð’Ð°Ñ€ÑˆÐ°Ð²Ð°", "ÐšÑ€Ð°ÐºÐ¾Ð²", "ÐŸÐ°Ñ€Ð¸Ð¶", "Ð‘ÐµÑ€Ð»Ð¸Ð½", "ÐœÑŽÐ½Ñ…ÐµÐ½", "Ð‘Ð°Ñ€ÑÐµÐ»Ð¾Ð½Ð°", "ÐœÐ°Ð´Ñ€Ð¸Ð´", "ÐœÐ¸Ð»Ð°Ð½",
  "Ð Ð¸Ð¼", "Ð¤Ð»Ð¾Ñ€ÐµÐ½Ñ†Ð¸Ñ", "ÐÐ¼ÑÑ‚ÐµÑ€Ð´Ð°Ð¼", "Ð‘Ñ€ÑŽÑÑÐµÐ»ÑŒ", "Ð¦ÑŽÑ€Ð¸Ñ…", "Ð–ÐµÐ½ÐµÐ²Ð°", "Ð›Ð¸ÑÑÐ°Ð±Ð¾Ð½",
  "ÐšÐ¾Ð¿ÐµÐ½Ð³Ð°Ð³ÐµÐ½", "ÐžÑÐ»Ð¾", "Ð¡Ñ‚Ð¾ÐºÐ³Ð¾Ð»ÑŒÐ¼", "Ð¥ÐµÐ»ÑŒÑÐ¸Ð½ÐºÐ¸", "Ð¢Ð°Ð»Ð»Ð¸Ð½", "Ð Ð¸Ð³Ð°", "Ð’Ð¸Ð»ÑŒÐ½ÑŽÑ",
  "Ð‘Ð°Ð½Ð³ÐºÐ¾Ðº", "ÐŸÑ…ÑƒÐºÐµÑ‚", "Ð§Ð¸Ð°Ð½Ð³Ð¼Ð°Ð¹", "ÐšÑƒÐ°Ð»Ð°-Ð›ÑƒÐ¼Ð¿ÑƒÑ€", "Ð”Ð¶Ð°ÐºÐ°Ñ€Ñ‚Ð°", "Ð‘Ð°Ð»Ð¸", "Ð¥Ð¾ÑˆÐ¸Ð¼Ð¸Ð½",
  "Ð¥Ð°Ð½Ð¾Ð¹", "Ð”Ð°Ð½Ð°Ð½Ð³", "ÐœÐ°Ð½Ð¸Ð»Ð°", "Ð¡Ð¸Ð½Ð³Ð°Ð¿ÑƒÑ€", "Ð¢Ð¾ÐºÐ¸Ð¾", "ÐžÑÐ°ÐºÐ°", "Ð¡ÐµÑƒÐ»", "ÐŸÑƒÑÐ°Ð½", "Ð‘ÑƒÑÐ°Ð½",
  "Ð”ÐµÐ»Ð¸", "ÐœÑƒÐ¼Ð±Ð°Ð¹", "Ð“Ð¾Ð°", "Ð§ÐµÐ½Ð½Ð°Ð¹", "ÐšÐ¾Ð»Ð¾Ð¼Ð±Ð¾", "ÐšÐ°Ñ‚Ð¼Ð°Ð½Ð´Ñƒ", "ÐœÐ°Ð»Ðµ",
  "Ð¢ÐµÐ»ÑŒ-ÐÐ²Ð¸Ð²", "ÐšÐ°Ð¸Ñ€", "Ð‘ÐµÐ¹Ñ€ÑƒÑ‚", "ÐÐ¼Ð¼Ð°Ð½", "Ð­Ñ€-Ð Ð¸ÑÐ´", "Ð”Ð¾Ñ…Ð°", "ÐœÐ°Ð½Ð°Ð¼Ð°", "ÐšÑƒÐ²ÐµÐ¹Ñ‚",
  "Ð¢ÐµÐ³ÐµÑ€Ð°Ð½", "ÐœÐ°ÑÐºÐ°Ñ‚", "Ð‘Ð°ÐºÑƒ", "Ð¢Ð±Ð¸Ð»Ð¸ÑÐ¸", "Ð•Ñ€ÐµÐ²Ð°Ð½", "Ð‘Ð°Ñ‚ÑƒÐ¼Ð¸",
  "ÐœÐ°Ð»ÑŒÐ´Ð¸Ð²Ñ‹", "Ð—Ð°Ð½Ð·Ð¸Ð±Ð°Ñ€", "ÐÐ°Ð¹Ñ€Ð¾Ð±Ð¸", "ÐœÐµÑ…Ð¸ÐºÐ¾", "Ð¡ÐµÑƒÑ‚Ð°", "Ð¡Ð°Ð½-ÐŸÐ°ÑƒÐ»Ñƒ", "ÐÑŒÑŽ-Ð™Ð¾Ñ€Ðº", "Ð›Ð¾Ñ-ÐÐ½Ð´Ð¶ÐµÐ»ÐµÑ"
];

const fromInput = document.getElementById("from");
const toInput = document.getElementById("to");
const fromList = document.getElementById("cityListFrom");
const toList = document.getElementById("cityListTo");

function updateDatalist(input, listElement) {
  const value = input.value.toLowerCase();
  listElement.innerHTML = "";
  cities.filter(city => city.toLowerCase().includes(value)).forEach(city => {
    const option = document.createElement("option");
    option.value = city;
    listElement.appendChild(option);
  });
}

fromInput.addEventListener("input", () => updateDatalist(fromInput, fromList));
toInput.addEventListener("input", () => updateDatalist(toInput, toList));

const form = document.getElementById("route-form");
form.onsubmit = (e) => {
  e.preventDefault();
  const from = fromInput.value;
  const to = toInput.value;
  const date = document.getElementById("date").value;

  const payload = {
    chat_id: Telegram.WebApp.initDataUnsafe.user?.id || null,
    from,
    to,
    date
  };

  fetch("https://hook.eu2.make.com/1sh8yxl1jhq2apxyfi3t808wkoyo51y2", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(payload)
  });

  alert("ðŸš€ Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½! Ð–Ð´Ð¸Ñ‚Ðµ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚...");
  setTimeout(() => Telegram.WebApp.close(), 700);
};
