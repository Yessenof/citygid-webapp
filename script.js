document.addEventListener("DOMContentLoaded", function () {
  const cities = [
    "–ê–ª–º–∞—Ç—ã", "–ê—Å—Ç–∞–Ω–∞", "–®—ã–º–∫–µ–Ω—Ç", "–ê–∫—Ç–æ–±–µ", "–ö–∞—Ä–∞–≥–∞–Ω–¥–∞", "–¢–∞—Ä–∞–∑", "–£—Å—Ç—å-–ö–∞–º–µ–Ω–æ–≥–æ—Ä—Å–∫",
    "–ü–∞–≤–ª–æ–¥–∞—Ä", "–ö–æ—Å—Ç–∞–Ω–∞–π", "–ö–æ–∫—à–µ—Ç–∞—É", "–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫", "–£—Ä–∞–ª—å—Å–∫", "–¢–∞–ª–¥—ã–∫–æ—Ä–≥–∞–Ω", "–°–µ–º–µ–π",
    "–î—É–±–∞–π", "–ê–±—É-–î–∞–±–∏", "–®–∞—Ä–¥–∂–∞", "–†–∞—Å-—ç–ª—å-–•–∞–π–º–∞", "–§—É–¥–∂–µ–π—Ä–∞",
    "–ë–∏—à–∫–µ–∫", "–û—à", "–¢–∞—à–∫–µ–Ω—Ç", "–°–∞–º–∞—Ä–∫–∞–Ω–¥", "–ù—É–∫—É—Å", "–•–∏–≤–∞", "–î—É—à–∞–Ω–±–µ", "–•—É–¥–∂–∞–Ω–¥",
    "–ú–æ—Å–∫–≤–∞", "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", "–°–æ—á–∏", "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä", "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥", "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫",
    "–û–º—Å–∫", "–¢–æ–º—Å–∫", "–ß–µ–ª—è–±–∏–Ω—Å–∫", "–ö–∞–∑–∞–Ω—å", "–£—Ñ–∞", "–ü–µ—Ä–º—å", "–í–æ–ª–≥–æ–≥—Ä–∞–¥", "–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É",
    "–ú–∞—Ö–∞—á–∫–∞–ª–∞", "–ê—Å—Ç—Ä–∞—Ö–∞–Ω—å", "–ò—Ä–∫—É—Ç—Å–∫", "–•–∞–±–∞—Ä–æ–≤—Å–∫", "–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫", "–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥",
    "–ê–Ω—Ç–∞–ª—å—è", "–°—Ç–∞–º–±—É–ª", "–ò–∑–º–∏—Ä", "–ë–æ–¥—Ä—É–º", "–ú–∞—Ä–º–∞—Ä–∏—Å", "–í–µ–Ω–∞", "–ü—Ä–∞–≥–∞", "–ë—É–¥–∞–ø–µ—à—Ç",
    "–í–∞—Ä—à–∞–≤–∞", "–ö—Ä–∞–∫–æ–≤", "–ü–∞—Ä–∏–∂", "–ë–µ—Ä–ª–∏–Ω", "–ú—é–Ω—Ö–µ–Ω", "–ë–∞—Ä—Å–µ–ª–æ–Ω–∞", "–ú–∞–¥—Ä–∏–¥", "–ú–∏–ª–∞–Ω",
    "–†–∏–º", "–§–ª–æ—Ä–µ–Ω—Ü–∏—è", "–ê–º—Å—Ç–µ—Ä–¥–∞–º", "–ë—Ä—é—Å—Å–µ–ª—å", "–¶—é—Ä–∏—Ö", "–ñ–µ–Ω–µ–≤–∞", "–õ–∏—Å—Å–∞–±–æ–Ω",
    "–ö–æ–ø–µ–Ω–≥–∞–≥–µ–Ω", "–û—Å–ª–æ", "–°—Ç–æ–∫–≥–æ–ª—å–º", "–•–µ–ª—å—Å–∏–Ω–∫–∏", "–¢–∞–ª–ª–∏–Ω", "–†–∏–≥–∞", "–í–∏–ª—å–Ω—é—Å",
    "–ë–∞–Ω–≥–∫–æ–∫", "–ü—Ö—É–∫–µ—Ç", "–ß–∏–∞–Ω–≥–º–∞–π", "–ö—É–∞–ª–∞-–õ—É–º–ø—É—Ä", "–î–∂–∞–∫–∞—Ä—Ç–∞", "–ë–∞–ª–∏", "–•–æ—à–∏–º–∏–Ω",
    "–•–∞–Ω–æ–π", "–î–∞–Ω–∞–Ω–≥", "–ú–∞–Ω–∏–ª–∞", "–°–∏–Ω–≥–∞–ø—É—Ä", "–¢–æ–∫–∏–æ", "–û—Å–∞–∫–∞", "–°–µ—É–ª", "–ü—É—Å–∞–Ω", "–ë—É—Å–∞–Ω",
    "–î–µ–ª–∏", "–ú—É–º–±–∞–π", "–ì–æ–∞", "–ß–µ–Ω–Ω–∞–π", "–ö–æ–ª–æ–º–±–æ", "–ö–∞—Ç–º–∞–Ω–¥—É", "–ú–∞–ª–µ",
    "–¢–µ–ª—å-–ê–≤–∏–≤", "–ö–∞–∏—Ä", "–ë–µ–π—Ä—É—Ç", "–ê–º–º–∞–Ω", "–≠—Ä-–†–∏—è–¥", "–î–æ—Ö–∞", "–ú–∞–Ω–∞–º–∞", "–ö—É–≤–µ–π—Ç",
    "–¢–µ–≥–µ—Ä–∞–Ω", "–ú–∞—Å–∫–∞—Ç", "–ë–∞–∫—É", "–¢–±–∏–ª–∏—Å–∏", "–ï—Ä–µ–≤–∞–Ω", "–ë–∞—Ç—É–º–∏",
    "–ú–∞–ª—å–¥–∏–≤—ã", "–ó–∞–Ω–∑–∏–±–∞—Ä", "–ù–∞–π—Ä–æ–±–∏", "–ú–µ—Ö–∏–∫–æ", "–°–µ—É—Ç–∞", "–°–∞–Ω-–ü–∞—É–ª—É", "–ù—å—é-–ô–æ—Ä–∫", "–õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å"
  ];

  function setupAutocomplete(inputId) {
    const input = document.getElementById(inputId);
    const list = document.getElementById(inputId + "-list");

    input.addEventListener("input", function () {
      const value = this.value.toLowerCase();
      list.innerHTML = "";
      if (!value) return;

      const matches = cities.filter(city =>
        city.toLowerCase().startsWith(value)
      );

      matches.forEach(city => {
        const item = document.createElement("div");
        item.className = "autocomplete-item";
        item.textContent = city;
        item.addEventListener("click", function () {
          input.value = city;
          list.innerHTML = "";
        });
        list.appendChild(item);
      });
    });

    document.addEventListener("click", function (e) {
      if (e.target !== input) {
        list.innerHTML = "";
      }
    });
  }

  setupAutocomplete("from");
  setupAutocomplete("to");

  const form = document.querySelector("form");
  form.addEventListener("submit", function (e) {
    e.preventDefault();

    const fromCity = document.getElementById("from").value;
    const toCity = document.getElementById("to").value;
    const date = document.getElementById("date").value;

    const payload = {
      from: fromCity,
      to: toCity,
      date: date,
      timestamp: new Date().toISOString()
    };

    fetch("https://hook.eu2.make.com/j6ijm9sab65jlnv1tiwjwnv9mmhndv5p", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(payload)
    });

    alert("üöÄ –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –ñ–¥–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç...");
  });
});
